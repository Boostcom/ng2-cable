!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("actioncable")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/operators","@angular/core","actioncable"],t):t(e["ng2-cable"]=e["ng2-cable"]||{},e.rxjs,e.rxjs_operators,e.ng.core,e.ActionCable)}(this,function(e,t,r,n,o){"use strict";var c=function(){function e(){this._eventBus=new t.Subject}return e.prototype.broadcast=function(e,t){this._eventBus.next({key:e,data:t})},e.prototype.on=function(e){return this._eventBus.asObservable().pipe(r.filter(function(t){return t.key===e}),r.map(function(e){return e.data}))},e}(),i=function(e,t,r,n){var o,c=arguments.length,i=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(c<3?o(i):c>3?o(t,r,i):o(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(e){this.broadcaster=e,this.actionCable=o}return e.prototype.subscribe=function(e,t,r){var n=this;void 0===r&&(r={}),this.setCable(e);var o=Object.assign({channel:t},r);this.subscription=this.cable.subscriptions.create(o,{received:function(e){n.broadcaster.broadcast(e.action||t,e)}})},e.prototype.setCable=function(e){this.cable=o.createConsumer(e)},e.prototype.unsubscribe=function(){this.cable.subscriptions.remove(this.subscription)},e=i([n.Injectable(),a("design:paramtypes",[c])],e)}(),u=function(e,t,r,n){var o,c=arguments.length,i=c<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(c<3?o(i):c>3?o(t,r,i):o(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i},f=function(){function e(){}return e=u([n.NgModule({providers:[s,c]})],e)}();e.Broadcaster=c,e.Ng2Cable=s,e.Ng2CableModule=f,Object.defineProperty(e,"__esModule",{value:!0})});